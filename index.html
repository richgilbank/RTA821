<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>FITC Toronto</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/style.css">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
    document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
  </script>
</head>

<body>

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section>
        <h1>jQuery to JavaScript</h1>
        <h2 class="intro">Growing beyond the DOM</h2>
        <h3>Rich Gilbank</h3>
      </section>

      <section data-background="#ff9500">
        <h2>Who is this guy?</h2>
        <h3>I like the cut of your jib.</h3>
      </section>

      <section>
        <h2>About me</h2>
        <ul>
          <li>I write code for fun and profit</li>
          <li>Budding open-source contributor</li>
          <li>All around nice guy, eh?</li>
          <li>Front-end developer at Shopify</li>
        </ul>
      </section>

      <section>
        <h2>Shopify</h2>
        <ul>
          <li>A platform for ecommerce &amp; more</li>
          <li>Sell online, in person and on the go</li>
          <li>Over 100,000 merchants</li>
          <li>Over $3 Billion in merchant sales</li>
        </ul>
        <img id="shopifyLogo" src="images/shopify.png">

        <aside class="notes">
          <ul>
            <li>Enough about me, let's talk about you</li>
          </ul>
        </aside>
      </section>

      <section>
        <h2>What's all this then?</h2>
        <h3>Let's learn some JavaScript&trade;</h3>
      </section>

      <section data-background="#E7003E">
        <h1>The problem</h1>
      </section>

      <section>
        <h1>JDD</h1>
        <h3>jQuery driven development*</h3>
        <p class="footnote">* Coined by @darcy</p>
      </section>

      <section>
        <h2>A confession</h2>
      </section>

      <section>
        <h2>Callback hell</h2>
        <pre><code contenteditable class="javascript">
$(document).ready(function(){
  $.ajax({
    type: 'POST',
    url: $('#admin_user_search').attr('action'),
    data: s_data,
    success: function(data){
      $.ajax({
        type: 'GET',
        url: data['content'],
        dataType: 'json',
        success: function(result){
          if(result.status == 'success'){
            if(result.keywords == $('#user_search').val()){
              var ul = $('<ul></ul>');
                for(i in result.users){
                  if(i < 10){
                    $(ul).append('<li><a href="/admin/users/'+result.users[i].id+'">'+result.users[i].name+'</a></li>');

...
        </code></pre>
      </section>

      <section>
        <h2>Chaining hell</h2>
        <pre><code contenteditable class="javascript">
$('div #badSelector').click(function(){

  $(this).fadeOut().text('New text').fadeIn().addClass('changed').parent().addClass('yikes');

});
        </code></pre>
      </section>

      <section>
        <h2>Bad variable declaration and scope</h2>
        <pre><code contenteditable class="html">
var foo = "I'm a global variable";

(function(){
  var foo = "I'm a local variable";
})();

console.log(foo); // I'm a global variable

(function(){
  foo = "I'm a local variable";
})();

console.log(foo); // I'm a local variable
        </code></pre>
      </section>

      <section data-background="#000000" data-background-image="images/javascript-howdoesitwork.png" data-background-size="cover">
        <h2 class="pink-bg">Javascript</h2><br><br>
        <h3 class="pink-bg">How does it work?</h3>
      </section>

      <section data-background="#E7003E">
        <h1>The solution</h1>
      </section>

      <section data-background="images/mario.png">
        <h1 class="eightbit pink-bg">Level-up your JS!</h1>
      </section>

      <section data-background="#ff9500">
        <h1>Structure</h1>
      </section>

      <section>
        <h2>The stages of JS app structure</h2>
      </section>

      <section>
        <h2>Stage 1: jQuery soup</h2>
        <pre><code contenteditable class="javascript">
$(document).ready(function(){

  if($('body.contact-us').length){ // Contact us page
    $('form').on('submit', function(){
      $.ajax({
        url: $('form').attr('action'),
        data: $('form').serialize(),
        dataType: 'json',
        success: function(data){
          $('.submission-message').html(data.responseText);
        }
      });
    });
  }

});
        </code></pre>
      </section>

      <section>
        <h2>Stage 2: Organization through namespacing</h2>
        <pre><code contenteditable class="javascript" style="max-height: 600px;">
var MyApp = {};
  MyApp.DOM = {};

  MyApp.init = function(pageId){
    MyApp.cacheDOM();
    MyApp.bindHandlers();
    MyApp.initializePageScripts(pageId);
  }
  MyApp.cacheDOM = function(){
    MyApp.DOM.$contactForm = $('form');
    MyApp.DOM.$messageArea = $('.submission-message');
  }
  MyApp.bindHandlers = function(){
    MyApp.DOM.$contactForm.on('submit', function(){
      MyApp.formSubmitted.call(this);
    });
  }
  MyApp.formSubmitted = function(){
    $.post($(this).attr('action'), $(this).serialize())
      .then(MyApp.showResponse)
  }
  MyApp.showResponse = function(data){
    MyApp.DOM.$messageArea.html(data.responseText);
  }

$(function(){
  MyApp.init($('body').attr('id'));
};
        </code></pre>
      </section>

      <section>
        <h2>Stage 3: MV*</h2>
        <pre><code contenteditable class="javascript" style="max-height: 600px;">
var MyApp = new Backbone.Marionette.Application();

// >> MV* magic goes here <<
        </code></pre>
      </section>

      <section data-background="#ff9500">
        <h1>Maintainability and Modularity</h1>
      </section>

      <section data-background="images/longfile.png" data-background-size="cover">
        <h2>Break up</h2>
        <h3>It's not you, it's we</h3>
      </section>

      <section>
        <h2>Frameworks/Libraries/etc</h2>
      </section>

      <section>
        <h2>Preprocessors</h2>
        <ul>
          <li>CoffeeScript, Typescript, ClojureScript, Dart</li>
          <li>Stylus, Sass/SCSS, LESS</li>
          <li>HAML, Slim, Jade</li>
        </ul>
      </section>

      <section>
        <h2>Putting it all together</h2>
        <ul>
          <li>Grunt</li>
          <li>Gulp</li>
          <li>Rake</li>
          <li>Make</li>
          <li>Cake</li>
          <li>etc</li>
        </ul>
      </section>

      <section data-background="images/jsdesign.jpg" data-background-size="contain">
        <h2 class="pink-bg custom-caps">http://bit.ly/1de5qfT</h3>
      </section>


      <section data-background="#ff9500">
        <h1>Performance</h1>
      </section>

      <section>
        <h2>Cache 'yer selectors!</h2>
        <pre><code contenteditable class="javascript">
var MyApp = {};
MyApp.DOM = {};

MyApp.init = function(){
  MyApp.cacheDOM();
  MyApp.doStuff();
}

MyApp.doStuff = function(){
  MyApp.DOM.$contactForm.on('submit', function(){
    MyApp.DOM.$submitBtn.prop('disabled', true);
  });
}

MyApp.cacheDOM = function(){
  MyApp.DOM.$contactForm = $('form.user-form');
  MyApp.DOM.$submitBtn = $('input[type="submit"]');
  MyApp.DOM.$flashMsg = $('.flash-msg');
}
        </code></pre>
      </section>

      <section>
        <h2>Fix 'yer selectors!</h2>
        <ul>
          <li class="bad">
            Bad:
            <pre style="margin: 0; width: auto;"><code contenteditable class="javascript">
$('div.main-content div#myElem');
            </code></pre>
          </li>
          <li>
            Good:
            <pre style="margin: 0; width: auto;"><code contenteditable class="javascript">
$('#myElem');
            </code></pre>
          </li>
          <li>
            Good:
            <pre style="margin: 0; width: auto;"><code contenteditable class="javascript">
$('nav');
            </code></pre>
          </li>
          <li>
            Good:
            <pre style="margin: 0; width: auto;"><code contenteditable class="javascript">
$('#myElem').find('nav');
            </code></pre>
          </li>
        </ul>
      </section>

      <section>
        <h2>Rule of thumb</h2>
        <p>For maximum performance, target native behaviour:</p>
        <ul>
          <li>document.getElementById()</li>
          <li>document.getElementByClassName()</li>
          <li>document.getElementByTagName()</li>
          <li>document.querySelectorAll()</li>
        </ul>
      </section>

      <section>
        <p>Plenty of good selector-related resources:</p>
        <h3 class="custom-caps">http://bit.ly/1tqgnET</h3>
      </section>

      <section>
        <h2>Reduce jank&trade;</h2>
        <ul>
          <li class="fragment">Reduce payload size</li>
          <li class="fragment">Perceived vs actual load time</li>
          <li class="fragment">DevTools audits</li>
          <li class="fragment">Hire a witch doctor (Google)</li>
        </ul>
      </section>

      <section data-background="#ff9500">
        <h1>Getting there</h1>
        <h3>Becoming a javascript developer</h3>
      </section>

      <section data-background="images/sofast.gif" data-background-color="#000000" data-background-size="contain">
      </section>

      <section>
        <h2>Build something!</h2>
        <h3>Anything. Really. Anything.</h3>
      </section>

      <section>
        <h2>Kill your TV</h2>
      </section>

      <section>
        <h2>Promises</h2>
      </section>

      <section>
        <h2>Without promises</h2>
        <pre><code contenteditable class="javascript">
(function(){
  var firstCallReturned = false;
  var secondCallReturned = false;

  $.get('/foo.html', function(){
    if(secondCallReturned){
      doSomething();
    }
    else{
      firstCallReturned = true;
    }
  });

  $.get('/bar.html', function(){
    if(firstCallReturned){
      doSomething();
    }
    else{
      secondCallReturned = true;
    }
  });

  function doSomething(){
    // ...
  }
})();
        </code></pre>
      </section>

      <section>
        <h2>With promises</h2>
        <pre><code contenteditable class="javascript">
(function(){
  var firstCall = $.get('/foo.html');
  var secondCall = $.get('/bar.html');

  $.when(firstCall, secondCall).then(doSomething);

  function doSomething(){
    // ...
  }
})();
        </code></pre>
      </section>

      <section data-background="images/robot.jpg">
        <h1 class="pink-bg">Danger, Will Robinson!</h1><br><br>
        <h3 class="pink-bg white">(Things to watch out for)</h3>
      </section>

      <section data-background="images/fuckthisshit.gif" data-background-size="contain" data-background-color="#000">
      </section>

      <section>
        <h2>PSA</h2>
        <pre><code contenteditable class="html">
<input type="text" id="foobar">
        </code></pre>
        <pre><code contenteditable class="javascript">
(function(){
  console.log(foobar); // <input type="text" id="foobar">
})();
        </code></pre>
      </section>

       <section data-transition="none" data-background-transition="none">
        <h2>Hoisting</h2>
        <pre><code contenteditable class="javascript">
var myVar = 3;

$(document).ready(function(){
  console.log(myVar);

  ...

  if(true){
    var myVar = 5;
  }
});
        </code></pre>
      </section>

      <section data-transition="none" data-background-transition="none">
        <h2>Hoisting</h2>
        <pre><code contenteditable class="javascript">
var myVar = 3;

$(document).ready(function(){
  console.log(myVar);  // Prints 'undefined' ಠ_ಠ

  ...

  if(true){
    var myVar = 5;
  }
});
        </code></pre>
      </section>

      <section>
        <h2>Declare your variables</h2>
        <pre><code contenteditable class="javascript">
var myVar = 3;

$(document).ready(function(){
  var myVar;

  console.log(myVar);

  ...
  myVar = 5;
});
        </code></pre>

        <h2>CoffeeScript</h2>
        <pre><code contenteditable class="coffeescript">
myVar = 3

$ ->
  console.log myVar
  myVar = 5
        </code></pre>
      </section>

      <section>
        <h2>Javascript: the other parts</h2>
        <pre><code contenteditable class="javascript">
"5" + 2; // "52"
"5" - 2; // 3
        </code></pre>
        <pre><code contenteditable class="javascript">
undefined == null; // true
undefined === null; //false
        </code></pre>
        <pre><code contenteditable class="javascript">
typeof undefined; // 'undefined'
typeof null; // null
        </code></pre>
        <pre><code contenteditable class="javascript">
true == 'true'     // true
false == 'false';  // false
        </code></pre>
        <pre><code contenteditable class="javascript">
"Why am I a " + typeof + ""; // "Why am I a number"
        </code></pre>
        <h2>wtfjs.com</h2>
      </section>

      <section data-background="images/backtothefuture.jpg">
        <h1>The future</h1>
        <h3 class="white">ECMAScript 6</h3>
      </section>

      <section>
        <h2>Block level scoping</h2>
        <pre><code contenteditable class="javascript">
var years = [];

for (var i = 0; i &lt;= 9; i++) {
    years[i] = function () {
        console.log("The year is 201" + i);
    };
}

years[4](); // The year is 2019 ಠ_ಠ
        </pre></code><br><br>

        <pre><code contenteditable class="javascript">
var years = [];

for (let i = 0; i &lt;= 9; i++) {
    years[i] = function () {
        console.log("The year is 201" + i);
    };
}

years[4](); // The year is 2014
        </code></pre>
      </section>

      <section>
        <h2>Default parameters</h2>
        <pre><code contenteditable class="javascript">
function myFunc(isWin = true, muchAwesome = true, suchBad = false){

    // Function-y stuff

}
        </code></pre>
        <br><br>
        <h2>Spread operators</h2>
        <pre><code contenteditable class="javascript">
function myFunc(arg1, ...otherArgs) {

    for(var i of otherArgs) {
        console.log(i);
    }

}
        </code></pre>
      </section>

      <section>
        <h2>And lots of other cool things...</h2>
        <h3>classes, destructuring, constants, generators, proxies, maps, weak maps, array comprehension, binary data, modules...</h3>
        <h2>And more!</h2>
      </section>

      <section data-background="#ff9500">
        <h1>Takeaways</h1>
      </section>

      <section>
        <ul>
          <li>Avoid callback &amp; chaining hell</li>
          <li>Globally scoped variables hurt kittens</li>
          <li>Learn how to use selectors well / use querySelectorAll</li>
          <li>Build something! Anything!</li>
          <li>Stay on top of future tech</li>
        </ul>
      </section>

      <section>
        <h1>Thanks!</h1>
        <h3>Twitter: @richgilbank</h3>
        <h3>Github: @richgilbank</h3>
        <img src="images/thankyou.gif" />
      </section>

    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: false,
      progress: false,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none
      backgroundTransition: 'slide',

      // Optional libraries used to extend on reveal.js
      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });

  </script>

</body>
</html>
